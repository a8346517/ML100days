import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
from scipy import stats
import math
import statistics
import seaborn as sns
# æŸå·¥å» æƒ³çŸ¥é“å…©æ¢ä¸åŒçš„ç”Ÿç”¢ç·šçš„ç”¢å“ä¸è‰¯çŽ‡æ˜¯å¦æœ‰æ‰€ä¸åŒï¼Œ
# ç”±å…©æ¢ç”Ÿç”¢ç·šä¸­å„æŠ½å– 300 å€‹æ¨£æœ¬ï¼Œç¬¬ä¸€çµ„æœ‰ 75 å€‹ä¸è‰¯å“ï¼Œ
# ç¬¬äºŒçµ„æœ‰ 30 å€‹ä¸è‰¯å“ï¼Œæˆ‘å€‘å¯ä»¥å®£ç¨±ç”Ÿç”¢ç·šæ‰€ç”Ÿç”¢å‡ºçš„ç”¢å“ä¸è‰¯çŽ‡ä¸ç›¸åŒ? 
# (ä»¥ 0.05 ç‚ºé¡¯è‘—æ°´æº–)?
# (æç¤º:é€éŽèª²ç¨‹æŠ•å½±ç‰‡çš„æ­¥é©Ÿï¼Œéœ€æ€è€ƒ ð»_0ã€ ð»_1 çš„å¯«æ³•å’Œç¯„ä¾‹ä¸åŒå”·ã€‚)
# H0ç”¢å‡ºè‰¯çŽ‡ç›¸åŒ pa(75/300)=pb(30/300)
# H1ç”¢ç”Ÿè‰¯çŽ‡ä¸ç›¸åŒ pa(75/300) !=pb (30/300)
# é›™å°¾æª¢å®š
import statsmodels.stats.proportion
A = [75,30]
B = [300,300]
X = statsmodels.stats.proportion.proportions_ztest(A,B,alternative = "two-sided")
print(X)
print("på°æ–¼0.05 ç‚ºé¡¯è‘—æ‹’çµ•H0å‡è¨­,å¯ä»¥èªªç”¢å“ä¸è‰¯çŽ‡ä¸åŒ")

# ä½œæ¥­ 2ï¼šä½ çš„å·¥ä½œï¼Œæœ‰éœ€è¦ A/B test å¹«ä½ åšæ±ºå®šï¼Ÿ
# å¯ä»¥åœ¨è«–å£‡ä¸­ï¼Œå¯«å‡ºä½ çš„å•é¡Œï¼Œå˜—è©¦ç”¨ä»Šå¤©èª²ç¨‹æ•™çš„æ–¹æ³•ï¼Œ
# é€éŽ 5å€‹æ­¥é©Ÿçš„æ‹†è§£ï¼Œè¨ˆç®—å‡ºçµæžœï¼Œé€éŽçµ±è¨ˆè¼”åŠ©ä½ åšæ±ºç­–ã€‚
# æœ‰ä¸€å€‹åˆ‡å‰²æ©Ÿå°ä»Šå¤©ç”¢ç”Ÿè‰¯å“9000å€‹,ç¸½æŠ•å…¥é‡ç‚º9300,
# æ˜¨å¤©ç”¢ç”Ÿè‰¯å“ç‚º8600,ç¸½æŠ•å…¥é‡ç‚º8800,æˆ‘å€‘å¯ä»¥å®£ç¨±ä»Šå¤©è‰¯çŽ‡å¤§æ–¼æ˜¨å¤©å—Ž
# H0 ä»Šå¤©è‰¯çŽ‡æ¯”æ˜¨å¤©é«˜(pa-pb>0) : H1 ä»Šå¤©è‰¯çŽ‡æ²’æ¯”æ˜¨å¤©é«˜(pa-pb<0)
A = [9000,8600]
B = [9300,8800]
X = statsmodels.stats.proportion.proportions_ztest(A,B,alternative = "smaller")
print(X)
print("på°æ–¼0.05 ç‚ºé¡¯è‘—æ‹’çµ•H0å‡è¨­,å¯ä»¥èªªæ˜¨å¤©è‰¯çŽ‡æ¯”ä»Šå¤©é«˜")